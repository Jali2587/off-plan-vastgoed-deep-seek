<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Costa Capital ‚Äì Premium Spaanse Off-Plan Projecten</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Ontdek premium off-plan vastgoedprojecten in Spanje. Professioneel advies, aantrekkelijke rendementen en exclusieve ontwikkelingen aan de Costa's." />

  <!-- TailwindCSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 UMD -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel compiler for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Lucide Icons (UMD) -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <!-- Google Fonts - Professional Typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* Professional Real Estate Color Palette */
    :root {
      /* Primary - Professional Neutrals */
      --primary-dark: #1A1A1A;
      --primary-gray: #2C3E50;
      --text-dark: #2D3436;
      --text-gray: #636E72;
      
      /* Accent - Sophisticated Warmth - BRIGHTER FOR VISIBILITY */
      --accent-copper: #D2691E;
      --accent-copper-light: #E67E22;
      --accent-gold: #F39C12;
      --accent-action: #E67E22; /* Bright call-to-action orange */
      
      /* Neutrals */
      --bg-white: #FFFFFF;
      --bg-light: #F8F9FA;
      --bg-cream: #FAF7F5;
      --border-light: #E8E8E8;
      --border-medium: #DFE6E9;
      
      /* Dark Backgrounds */
      --bg-dark-green: #2C5F4D;
      --bg-charcoal: #36454F;
      --bg-dark-overlay: rgba(44, 95, 77, 0.85);
      
      /* Semantic */
      --success: #27AE60;
      --warning: #F39C12;
      --danger: #E74C3C;
    }

    body {
      background: var(--bg-white);
      font-family: 'Inter', sans-serif;
      color: var(--text-dark);
      line-height: 1.6;
    }

    h1, h2, h3, .heading-font {
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      line-height: 1.2;
    }

    .modal-backdrop {
      background: rgba(26, 26, 26, 0.85);
      backdrop-filter: blur(10px);
    }

    /* Smooth Transitions */
    * {
      transition: all 0.2s ease-in-out;
    }

    /* Hero Image Background */
    .hero-image {
      background: linear-gradient(to bottom, rgba(44, 95, 77, 0.4) 0%, rgba(44, 95, 77, 0.7) 100%),
                  url('https://images.unsplash.com/photo-1583847268964-b28dc8f51f92?w=1920&q=80');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }

    /* Card Hover Effects - Subtle */
    .project-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .project-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
    }

    /* Smooth Scroll */
    html {
      scroll-behavior: smooth;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-light);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--accent-copper);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--accent-copper-light);
    }

    /* Animation Classes */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fadeInUp {
      animation: fadeInUp 0.6s ease-out forwards;
    }

    /* Subtle Pulse for Badges */
    @keyframes pulse-subtle {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.85;
      }
    }

    .pulse-subtle {
      animation: pulse-subtle 3s infinite;
    }

    /* Loading State */
    .spinner {
      border: 3px solid var(--bg-light);
      border-top: 3px solid var(--accent-copper);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Image Zoom on Hover */
    .image-zoom-hover {
      overflow: hidden;
    }

    .image-zoom-hover img {
      transition: transform 0.6s ease;
    }

    .image-zoom-hover:hover img {
      transform: scale(1.05);
    }
  </style>

  <script>
    // Tailwind Custom Configuration
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            terracotta: {
              DEFAULT: '#D2691E',
              light: '#E8956B',
              dark: '#B8551A',
            },
            mediterranean: {
              DEFAULT: '#0077BE',
              dark: '#005A8D',
              light: '#3399CC',
            },
            sand: {
              DEFAULT: '#F5E6D3',
              dark: '#E8D4BA',
              light: '#FFF8F0',
            },
            olive: {
              DEFAULT: '#6B8E23',
              light: '#8FB339',
              dark: '#556B1F',
            },
            cream: '#FFF5E6',
          },
          fontFamily: {
            'display': ['Playfair Display', 'serif'],
            'body': ['Inter', 'sans-serif'],
          },
        }
      }
    }
  </script>
</head>

<body>
  <div id="root"></div>

  <!-- MAIN SCRIPT -->
  <script type="text/babel">
/*************************************************************
 *  BLOCK 2 ‚Äî AUTHENTICATION (Admin + Investor)
 *************************************************************/

// Welke gebruiker admin is:
const ADMIN_EMAIL = "jaap@jlmbusinessholding.com";

// ---------------------------------------------
// LOGIN MODAL COMPONENT
// ---------------------------------------------
function LoginModal({ open, onClose, onLogin }) {
  const [email, setEmail] = React.useState("");
  const [loading, setLoading] = React.useState(false);
  const [message, setMessage] = React.useState("");

  if (!open) return null;

  async function handleSubmit() {
    setLoading(true);
    setMessage("");

    try {
      const result = await loginUser(email.trim());
      if (result.error) {
        setMessage(result.error);
      } else {
        setMessage("‚úÖ Check je inbox om in te loggen!");
        onLogin(email);
      }
    } catch (e) {
      setMessage("Er ging iets mis. Probeer opnieuw.");
    }

    setLoading(false);
  }

  return (
    <div className="fixed inset-0 modal-backdrop flex items-center justify-center z-50 p-4">
      <div className="bg-white border-2 border-terracotta/20 rounded-2xl p-8 w-full max-w-md shadow-2xl animate-fadeInUp">

        <div className="text-center mb-6">
          <div className="w-16 h-16 bg-gradient-to-br from-terracotta to-mediterranean rounded-full mx-auto mb-4 flex items-center justify-center text-3xl">
            üèñÔ∏è
          </div>
          <h2 className="text-3xl font-display font-bold text-gray-800 mb-2">Welkom terug</h2>
          <p className="text-gray-600">Log in om je favoriete projecten te bekijken</p>
        </div>

        <label className="block text-sm font-semibold text-gray-700 mb-2">E-mailadres</label>
        <input
          className="w-full px-4 py-3 bg-sand-light border-2 border-sand-dark rounded-xl mb-4 text-gray-800 focus:border-terracotta focus:outline-none focus:ring-2 focus:ring-terracotta/20"
          placeholder="uw.email@example.com"
          type="email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && handleSubmit()}
        />

        <button
          className="w-full bg-gradient-to-r from-terracotta to-terracotta-light text-white font-bold py-3 rounded-xl shadow-lg hover:shadow-xl hover:from-terracotta-dark hover:to-terracotta transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
          onClick={handleSubmit}
          disabled={loading}
        >
          {loading ? (
            <span className="flex items-center justify-center gap-2">
              <div className="spinner !w-5 !h-5 !border-2"></div>
              Versturen...
            </span>
          ) : (
            "‚úâÔ∏è Magic Link Verzenden"
          )}
        </button>

        {message && (
          <div className={`mt-4 p-3 rounded-xl text-sm ${
            message.includes('‚úÖ') 
              ? 'bg-olive-light/20 text-olive-dark border border-olive-light' 
              : 'bg-red-100 text-red-700 border border-red-300'
          }`}>
            {message}
          </div>
        )}

        <button
          onClick={onClose}
          className="mt-6 w-full border-2 border-gray-300 text-gray-700 py-2 rounded-xl hover:bg-gray-50"
        >
          Sluiten
        </button>
      </div>
    </div>
  );
}

// ---------------------------------------------
// NETLIFY FUNCTIONS ‚Äî AUTH CALLS
// ---------------------------------------------

// 1) magic-link login (email ‚Üí JWT)
async function loginUser(email) {
  const res = await fetch("/.netlify/functions/auth-login", {
    method: "POST",
    body: JSON.stringify({ email })
  });
  return res.json();
}

// 2) token controleren
async function verifyUser(token) {
  const res = await fetch("/.netlify/functions/auth-verify", {
    method: "POST",
    body: JSON.stringify({ token })
  });
  return res.json();
}

// ---------------------------------------------
// AUTH HELPERS (localStorage)
// ---------------------------------------------

function saveSession(token, user) {
  localStorage.setItem("jwt", token);
  localStorage.setItem("user", JSON.stringify(user));
}

function clearSession() {
  localStorage.removeItem("jwt");
  localStorage.removeItem("user");
}

function getSavedUser() {
  const token = localStorage.getItem("jwt");
  const user = localStorage.getItem("user");
  return token && user ? { token, user: JSON.parse(user) } : null;
}

// ---------------------------------------------
// USER ROLE LOGICA
// ---------------------------------------------
function resolveRole(email) {
  return email === ADMIN_EMAIL ? "admin" : "investor";
}

/*************************************************************
 *  BLOCK 3 ‚Äî DATA HELPERS + AI MATCHING + JSON LOADERS
 *************************************************************/

// -------------------------------
// PATHS
// -------------------------------
const PROJECTS_URL = "/data/projects.json";
const INVESTORS_URL = "/data/investors.json";
const RESERVATIONS_URL = "/data/reservations.json";

// -------------------------------
// SAVE DATA (project / reservation)
// -------------------------------
async function saveToNetlify(newData, fileName) {
  try {
    const res = await fetch("/.netlify/functions/save", {
      method: "POST",
      body: JSON.stringify({ file: fileName, newData })
    });

    return res.json();
  } catch (err) {
    console.error("SAVE ERROR:", err);
    return { error: err.message };
  }
}

// -------------------------------
// AI MATCH ‚Äî DEEPSEEK WRAPPER
// -------------------------------
async function runAIMatch(project, investors) {
  try {
    const res = await fetch("/.netlify/functions/ai-match", {
      method: "POST",
      body: JSON.stringify({ project, investors })
    });

    return res.json();
  } catch (err) {
    console.error("AI MATCH ERROR:", err);
    return [];
  }
}

// -------------------------------
// PRICE FORMATTER
// -------------------------------
function formatPrice(value) {
  return new Intl.NumberFormat("nl-NL", {
    style: "currency",
    currency: "EUR",
    minimumFractionDigits: 0
  }).format(value);
}

// -------------------------------
// AVAILABILITY CALC
// -------------------------------
function calculateAvailability(property) {
  const available = property.totalUnits - property.soldUnits;
  const percentageSold = Math.round(
    (property.soldUnits / property.totalUnits) * 100
  );
  return { available, percentageSold };
}

// -------------------------------
// SALES SPEED
// -------------------------------
function calculateSalesSpeed(property) {
  const start = new Date(property.salesStartDate || "2024-01-01");
  const now = new Date();
  const months = Math.max(
    1,
    Math.round((now - start) / (1000 * 60 * 60 * 24 * 30))
  );

  return {
    monthsElapsed: months,
    soldPerMonth: property.soldUnits / months
  };
}

// -------------------------------
// URGENCY BADGE
// -------------------------------
function getUrgencyLevel(available) {
  if (available <= 2)
    return { color: "from-red-600 to-rose-500", text: "Laatste kans", pulse: true };

  if (available <= 4)
    return { color: "from-amber-600 to-orange-500", text: "Bijna uitverkocht", pulse: true };

  if (available <= 8)
    return { color: "from-yellow-500 to-amber-400", text: "Populair", pulse: false };

  return { color: "from-emerald-500 to-teal-400", text: "Beschikbaar", pulse: false };
}

// -------------------------------
// CAROUSEL HELPERS
// -------------------------------
function nextIndex(current, total) {
  return (current + 1) % total;
}

function prevIndex(current, total) {
  return (current - 1 + total) % total;
}

// -------------------------------
// FIELD VALIDATION
// -------------------------------
function isEmpty(value) {
  return !value || value.trim().length === 0;
}

// -------------------------------
// LOAD ALL DATA (projects, investors, reservations)
// -------------------------------
async function loadAllData() {
  try {
    const [projects, investors, reservations] = await Promise.all([
      fetch(PROJECTS_URL).then((r) => r.json()),
      fetch(INVESTORS_URL).then((r) => r.json()),
      fetch(RESERVATIONS_URL).then((r) => r.json())
    ]);

    return { projects, investors, reservations };
  } catch (err) {
    console.error("DATA LOAD ERROR:", err);
    return { projects: [], investors: [], reservations: [] };
  }
}

/*************************************************************
 *  BLOCK 4 ‚Äî UI COMPONENTS (Projecten, Detail, Carousel, etc.)
 *************************************************************/

// =========================================================
// PROJECT CARD COMPONENT
// =========================================================
function ProjectCard({ p, onSelect, isAdmin, onEdit }) {
  const { available, percentageSold } = calculateAvailability(p);
  const urgency = getUrgencyLevel(available);

  // Professional urgency colors
  const urgencyStyles = {
    "Laatste kans": "bg-danger text-white pulse-subtle",
    "Bijna uitverkocht": "bg-warning text-white",
    "Populair": "bg-accent-copper text-white",
    "Beschikbaar": "bg-success text-white"
  };

  return (
    <div className="project-card bg-white rounded-xl overflow-hidden shadow-md border border-border-light hover:shadow-xl">

      {/* IMAGE */}
      <div className="relative image-zoom-hover">
        <img
          src={p.images?.[0] || "https://images.unsplash.com/photo-1583847268964-b28dc8f51f92?w=800&q=80"}
          className="w-full h-48 object-cover"
          alt={p.title}
        />

        {/* Subtle Gradient Overlay */}
        <div className="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>

        {/* URGENCY BADGE */}
        <div className="absolute top-4 right-4">
          <div className={`px-3 py-1 rounded-md text-xs font-semibold shadow-lg ${urgencyStyles[urgency.text] || "bg-success text-white"}`}
            style={{backgroundColor: urgency.text === "Laatste kans" ? "var(--danger)" : urgency.text === "Bijna uitverkocht" ? "var(--warning)" : urgency.text === "Populair" ? "var(--accent-copper)" : "var(--success)"}}
          >
            {urgency.text}
          </div>
        </div>

        {/* ADMIN BUTTONS */}
        {isAdmin && (
          <div className="absolute top-4 left-4">
            <button
              onClick={(e) => { e.stopPropagation(); onEdit(p); }}
              className="px-3 py-1 text-white rounded-md text-xs font-semibold shadow-lg hover:bg-white hover:text-primary-dark transition"
              style={{backgroundColor: "var(--primary-gray)"}}
            >
              Bewerken
            </button>
          </div>
        )}

        {/* Location Badge */}
        <div className="absolute bottom-4 left-4">
          <div className="bg-white/95 backdrop-blur-sm px-3 py-1 rounded-md text-xs font-medium flex items-center gap-1.5"
            style={{color: "var(--text-dark)"}}
          >
            <svg className="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
              <path fillRule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clipRule="evenodd" />
            </svg>
            {p.location}
          </div>
        </div>
      </div>

      {/* CONTENT - COMPACT SPACING */}
      <div className="p-4">
        <h3 className="text-lg font-display font-bold mb-2 line-clamp-2"
          style={{color: "var(--text-dark)"}}
        >
          {p.title}
        </h3>

        <p className="text-2xl font-display font-bold mb-3"
          style={{color: "var(--accent-copper)"}}
        >
          {formatPrice(p.price)}
        </p>

        {/* Property Details - Inline */}
        <div className="flex items-center gap-2 mb-3 text-sm flex-wrap"
          style={{color: "var(--text-gray)"}}
        >
          <span className="font-bold" style={{color: "var(--success)", fontSize: "0.9rem"}}>{p.roi}% ROI</span>
          <span>‚Ä¢</span>
          <span>{p.totalUnits} Units</span>
          <span>‚Ä¢</span>
          <span className="font-semibold"
            style={{color: "var(--success)"}}
          >{available} Beschikbaar</span>
        </div>

        {/* PROGRESS BAR */}
        <div className="mb-3">
          <div className="flex justify-between text-xs mb-1"
            style={{color: "var(--text-gray)"}}
          >
            <span className="font-medium">Verkocht</span>
            <span className="font-semibold">{percentageSold}%</span>
          </div>
          <div className="w-full rounded-full h-2 overflow-hidden"
            style={{backgroundColor: "var(--bg-light)"}}
          >
            <div
              className="h-2 rounded-full transition-all duration-500"
              style={{ 
                width: `${percentageSold}%`,
                backgroundColor: "var(--accent-copper)"
              }}
            />
          </div>
        </div>

        {/* PROMINENT ACTION BUTTON */}
        <button
          onClick={() => onSelect(p)}
          className="w-full py-3.5 rounded-lg font-bold transition-all hover:shadow-lg text-base"
          style={{
            backgroundColor: "var(--accent-action)",
            color: "white",
            fontSize: "1rem"
          }}
          onMouseEnter={(e) => {
            e.target.style.backgroundColor = "var(--accent-gold)";
            e.target.style.transform = "translateY(-2px)";
            e.target.style.boxShadow = "0 8px 16px rgba(230, 126, 34, 0.3)";
          }}
          onMouseLeave={(e) => {
            e.target.style.backgroundColor = "var(--accent-action)";
            e.target.style.transform = "translateY(0)";
            e.target.style.boxShadow = "none";
          }}
        >
          Bekijk Details ‚Üí
        </button>

      </div>
    </div>
  );
}



// =========================================================
// HERO SECTION COMPONENT
// =========================================================
function HeroSection({ onRegister, onBrowse }) {
  return (
    <div className="hero-image relative min-h-screen flex items-center justify-center text-white">
      <div className="max-w-5xl mx-auto text-center px-6 py-20">
        
        {/* Main Headline */}
        <div className="animate-fadeInUp mb-8">
          <h1 className="text-5xl md:text-7xl lg:text-8xl font-display font-bold mb-6 leading-tight">
            Premium Spaanse<br />
            Off-Plan Projecten
          </h1>
          <p className="text-xl md:text-2xl text-white/95 max-w-3xl mx-auto leading-relaxed font-light">
            Exclusieve vastgoedontwikkelingen aan de Costa's.<br className="hidden md:block" />
            Professioneel beheer. Aantrekkelijke rendementen.
          </p>
        </div>

        {/* CTA BUTTONS - HIGH VISIBILITY */}
        <div className="flex flex-col sm:flex-row gap-4 justify-center items-center mt-12">
          <button
            onClick={onBrowse}
            className="px-12 py-4 bg-white font-bold rounded-lg shadow-2xl hover:shadow-3xl transition-all text-lg"
            style={{
              color: "var(--accent-action)",
              fontSize: "1.1rem"
            }}
            onMouseEnter={(e) => {
              e.target.style.backgroundColor = "var(--accent-action)";
              e.target.style.color = "white";
              e.target.style.transform = "scale(1.05)";
            }}
            onMouseLeave={(e) => {
              e.target.style.backgroundColor = "white";
              e.target.style.color = "var(--accent-action)";
              e.target.style.transform = "scale(1)";
            }}
          >
            Bekijk Projecten ‚Üí
          </button>
          <button
            onClick={onRegister}
            className="px-12 py-4 bg-transparent border-2 border-white text-white font-bold rounded-lg hover:bg-white transition-all text-lg"
            style={{
              borderColor: "white",
              fontSize: "1.1rem"
            }}
            onMouseEnter={(e) => {
              e.target.style.backgroundColor = "white";
              e.target.style.color = "var(--primary-dark)";
              e.target.style.transform = "scale(1.05)";
            }}
            onMouseLeave={(e) => {
              e.target.style.backgroundColor = "transparent";
              e.target.style.color = "white";
              e.target.style.transform = "scale(1)";
            }}
          >
            Contact
          </button>
        </div>

        {/* Trust Indicators */}
        <div className="mt-16 flex flex-wrap justify-center items-center gap-8 text-white/80 text-sm md:text-base">
          <div className="flex items-center gap-2">
            <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
            </svg>
            <span className="font-medium">Exclusieve Locaties</span>
          </div>
          <div className="flex items-center gap-2">
            <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
            </svg>
            <span className="font-medium">Professioneel Beheer</span>
          </div>
          <div className="flex items-center gap-2">
            <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
            </svg>
            <span className="font-medium">Hoge ROI</span>
          </div>
        </div>
      </div>

      {/* Scroll Indicator */}
      <div className="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
        <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 14l-7 7m0 0l-7-7m7 7V3" />
        </svg>
      </div>
    </div>
  );
}

// =========================================================
// WHY INVEST SECTION - REDUCED PADDING
// =========================================================
function WhyInvestSection() {
  const reasons = [
    {
      title: "Perfect Klimaat",
      desc: "300+ dagen zon per jaar, het hele jaar door genieten van de Spaanse levensstijl en hoge verhuurpotentie."
    },
    {
      title: "Sterke Markt",
      desc: "Spaanse vastgoedmarkt groeit gestaag met consistente waardestijging, ideaal voor lange termijn investeringen."
    },
    {
      title: "Off-Plan Voordeel",
      desc: "Vroege instap betekent lagere prijzen, flexibele betalingsplannen en maximale waardestijging bij oplevering."
    },
    {
      title: "Internationale Vraag",
      desc: "Hoge vraag van internationale kopers en huurders garandeert uitstekende verhuurmogelijkheden en liquiditeit."
    }
  ];

  return (
    <div className="py-16 px-6"
      style={{backgroundColor: "var(--bg-cream)"}}
    >
      <div className="max-w-6xl mx-auto">
        <div className="text-center mb-10">
          <h2 className="text-3xl md:text-4xl font-display font-bold mb-3"
            style={{color: "var(--text-dark)"}}
          >
            Waarom Spaans Off-Plan Vastgoed?
          </h2>
          <p className="text-lg max-w-2xl mx-auto"
            style={{color: "var(--text-gray)"}}
          >
            Vier sterke redenen om te investeren in Spaanse nieuwbouwprojecten
          </p>
        </div>

        <div className="grid md:grid-cols-2 gap-5">
          {reasons.map((reason, i) => (
            <div key={i} className="bg-white rounded-lg p-6 border hover:shadow-lg transition-shadow"
              style={{borderColor: "var(--border-light)"}}
            >
              <div className="flex items-start gap-3">
                <div className="flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center font-bold text-lg"
                  style={{
                    backgroundColor: "var(--accent-action)",
                    color: "white"
                  }}
                >
                  {i + 1}
                </div>
                <div>
                  <h3 className="text-lg font-display font-bold mb-2"
                    style={{color: "var(--text-dark)"}}
                  >
                    {reason.title}
                  </h3>
                  <p className="leading-relaxed text-sm"
                    style={{color: "var(--text-gray)"}}
                  >
                    {reason.desc}
                  </p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

// =========================================================
// HOW IT WORKS SECTION - IMPROVED CONTRAST
// =========================================================
function HowItWorksSection() {
  const steps = [
    { number: "1", title: "Ontdek", desc: "Browse door onze exclusieve projecten en vind uw ideale investering" },
    { number: "2", title: "Advies", desc: "Onze experts begeleiden u bij het maken van de juiste keuze" },
    { number: "3", title: "Reserveer", desc: "Veilig en eenvoudig uw off-plan project reserveren" },
    { number: "4", title: "Profiteer", desc: "Wij regelen alles, u geniet van waardestijging en rendement" }
  ];

  return (
    <div className="py-20 px-6"
      style={{backgroundColor: "var(--bg-dark-green)"}}
    >
      <div className="max-w-6xl mx-auto">
        <div className="text-center mb-12">
          <h2 className="text-4xl md:text-5xl font-display font-bold text-white mb-4">
            Hoe Werkt Het?
          </h2>
          <p className="text-xl text-white/90">
            In 4 eenvoudige stappen naar uw Spaanse vastgoed
          </p>
        </div>

        <div className="grid md:grid-cols-4 gap-6">
          {steps.map((step, i) => (
            <div key={i} className="text-center">
              <div className="relative mb-5">
                <div className="w-16 h-16 mx-auto rounded-full flex items-center justify-center text-2xl font-bold shadow-lg"
                  style={{
                    backgroundColor: "var(--accent-action)",
                    color: "white"
                  }}
                >
                  {step.number}
                </div>
                {i < steps.length - 1 && (
                  <div className="hidden md:block absolute top-8 left-[calc(50%+2rem)] w-[calc(100%-2rem)] h-0.5 bg-white/30"></div>
                )}
              </div>
              <h3 className="text-lg font-display font-bold text-white mb-2">{step.title}</h3>
              <p className="text-white/90 text-sm leading-relaxed">{step.desc}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

// =========================================================
// OVERVIEW PAGE
// =========================================================
function OverviewPage({ projects, onSelect, isAdmin, onEdit, onRegister }) {
  const scrollToProjects = () => {
    document.getElementById('projects-section')?.scrollIntoView({ behavior: 'smooth' });
  };

  return (
    <div>
      {/* Hero Section */}
      {!isAdmin && (
        <>
          <HeroSection 
            onRegister={onRegister}
            onBrowse={scrollToProjects}
          />
          
          {/* Why Invest Section */}
          <WhyInvestSection />
          
          {/* How It Works Section */}
          <HowItWorksSection />
        </>
      )}

      {/* Projects Section - REDUCED PADDING */}
      <div id="projects-section" className="py-16 px-6"
        style={{backgroundColor: "var(--bg-white)"}}
      >
        <div className="max-w-7xl mx-auto">

          <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
            <div>
              <h2 className="text-3xl md:text-4xl font-display font-bold mb-2"
                style={{color: "var(--text-dark)"}}
              >
                {isAdmin ? "Projectbeheer" : "Beschikbare Projecten"}
              </h2>
              <p className="text-base"
                style={{color: "var(--text-gray)"}}
              >
                {isAdmin ? "Beheer alle vastgoedprojecten" : "Ontdek onze exclusieve off-plan ontwikkelingen"}
              </p>
            </div>

            {isAdmin && (
              <button
                onClick={() => onEdit("new")}
                className="px-6 py-3 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all"
                style={{backgroundColor: "var(--primary-gray)"}}
                onMouseEnter={(e) => e.target.style.backgroundColor = "var(--primary-dark)"}
                onMouseLeave={(e) => e.target.style.backgroundColor = "var(--primary-gray)"}
              >
                + Nieuw Project
              </button>
            )}
          </div>

          {projects.length === 0 ? (
            <div className="text-center py-20">
              <svg className="w-24 h-24 mx-auto mb-4" style={{color: "var(--text-gray)"}} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
              <p className="text-lg" style={{color: "var(--text-gray)"}}>Nog geen projecten beschikbaar</p>
            </div>
          ) : (
            <div className="grid gap-5 md:grid-cols-2 lg:grid-cols-3">
              {projects.map((p) => (
                <ProjectCard
                  key={p.id}
                  p={p}
                  onSelect={onSelect}
                  isAdmin={isAdmin}
                  onEdit={onEdit}
                />
              ))}
            </div>
          )}

        </div>
      </div>

      {/* Contact CTA Section - IMPROVED CONTRAST & VISIBILITY */}
      {!isAdmin && projects.length > 0 && (
        <div className="py-16 px-6"
          style={{backgroundColor: "var(--bg-dark-green)"}}
        >
          <div className="max-w-4xl mx-auto text-center">
            <h2 className="text-3xl md:text-4xl font-display font-bold text-white mb-3">
              Vragen over Off-Plan Investeren?
            </h2>
            <p className="text-lg text-white/95 mb-7">
              Onze experts staan voor u klaar met persoonlijk advies
            </p>
            <button
              onClick={onRegister}
              className="px-12 py-4 bg-white rounded-lg font-bold shadow-2xl hover:shadow-3xl transition-all text-lg"
              style={{
                color: "var(--accent-action)",
                fontSize: "1.1rem"
              }}
              onMouseEnter={(e) => {
                e.target.style.backgroundColor = "var(--accent-action)";
                e.target.style.color = "white";
                e.target.style.transform = "translateY(-2px)";
              }}
              onMouseLeave={(e) => {
                e.target.style.backgroundColor = "white";
                e.target.style.color = "var(--accent-action)";
                e.target.style.transform = "translateY(0)";
              }}
            >
              Neem Contact Op ‚Üí
            </button>
          </div>
        </div>
      )}

    </div>
  );
}



// =========================================================
// IMAGE CAROUSEL
// =========================================================
function ImageCarousel({ images, index, setIndex }) {
  if (!images || images.length === 0)
    return (
      <div className="bg-sand-light border-2 border-sand-dark rounded-2xl h-96 flex flex-col items-center justify-center text-gray-500">
        <div className="text-6xl mb-4">üñºÔ∏è</div>
        <p className="font-medium">Geen afbeeldingen beschikbaar</p>
      </div>
    );

  return (
    <div className="relative bg-gray-900 rounded-2xl overflow-hidden shadow-2xl border-4 border-sand-dark/50">

      <img
        src={images[index]}
        alt={`Afbeelding ${index + 1}`}
        className="w-full h-[600px] object-contain bg-gray-900"
      />

      {images.length > 1 && (
        <>
          {/* Previous Button */}
          <button
            onClick={() => setIndex(prevIndex(index, images.length))}
            className="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/95 backdrop-blur-sm rounded-full text-terracotta hover:bg-terracotta hover:text-white transition shadow-2xl flex items-center justify-center font-bold text-2xl"
            aria-label="Vorige afbeelding"
          >
            ‚Äπ
          </button>

          {/* Next Button */}
          <button
            onClick={() => setIndex(nextIndex(index, images.length))}
            className="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/95 backdrop-blur-sm rounded-full text-terracotta hover:bg-terracotta hover:text-white transition shadow-2xl flex items-center justify-center font-bold text-2xl"
            aria-label="Volgende afbeelding"
          >
            ‚Ä∫
          </button>

          {/* Image Counter */}
          <div className="absolute bottom-6 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur-sm text-gray-800 px-5 py-2 rounded-full text-sm font-semibold border-2 border-sand-dark shadow-lg">
            {index + 1} / {images.length}
          </div>

          {/* Dot Indicators */}
          <div className="absolute bottom-20 left-1/2 -translate-x-1/2 flex gap-2">
            {images.map((_, i) => (
              <button
                key={i}
                onClick={() => setIndex(i)}
                className={`w-2 h-2 rounded-full transition-all ${
                  i === index 
                    ? 'bg-terracotta w-8' 
                    : 'bg-white/50 hover:bg-white/80'
                }`}
                aria-label={`Ga naar afbeelding ${i + 1}`}
              />
            ))}
          </div>
        </>
      )}

    </div>
  );
}



// =========================================================
// DETAIL PAGE
// =========================================================
function DetailPage({ property, onBack, onReserve, onAIMatch }) {
  const [view, setView] = React.useState("renders");
  const [index, setIndex] = React.useState(0);

  const images = view === "renders" ? property.images : property.floorplans;

  const { available, percentageSold } = calculateAvailability(property);
  const { monthsElapsed, soldPerMonth } = calculateSalesSpeed(property);
  const urgency = getUrgencyLevel(available);

  // Spanish-themed urgency colors
  const urgencyStyles = {
    "Laatste kans": "from-red-600 to-orange-500 pulse-glow",
    "Bijna uitverkocht": "from-orange-500 to-terracotta pulse-glow",
    "Populair": "from-terracotta to-terracotta-light",
    "Beschikbaar": "from-olive to-olive-light"
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-sand-light to-white">
      <div className="max-w-7xl mx-auto px-6 py-8">

        {/* Back Button */}
        <button
          onClick={onBack}
          className="flex items-center gap-2 text-terracotta hover:text-terracotta-dark transition mb-6 font-medium"
        >
          ‚Üê Terug naar overzicht
        </button>

        {/* Project Title */}
        <h1 className="text-4xl md:text-5xl font-display font-bold text-gray-900 mb-6">
          {property.title}
        </h1>

        {/* VIEW SWITCH */}
        <div className="flex gap-3 mb-6">
          <button
            onClick={() => { setView("renders"); setIndex(0); }}
            className={`px-6 py-3 rounded-xl font-semibold transition shadow-md ${
              view === "renders" 
                ? "bg-gradient-to-r from-terracotta to-terracotta-light text-white" 
                : "bg-white text-gray-700 border-2 border-sand-dark hover:border-terracotta"
            }`}
          >
            üè† Renders ({property.images.length})
          </button>

          <button
            onClick={() => { setView("floorplans"); setIndex(0); }}
            className={`px-6 py-3 rounded-xl font-semibold transition shadow-md ${
              view === "floorplans" 
                ? "bg-gradient-to-r from-terracotta to-terracotta-light text-white" 
                : "bg-white text-gray-700 border-2 border-sand-dark hover:border-terracotta"
            }`}
          >
            üìê Plattegronden ({property.floorplans.length})
          </button>
        </div>

        {/* Image Carousel */}
        <ImageCarousel images={images} index={index} setIndex={setIndex} />

        {/* INFO GRID */}
        <div className="grid lg:grid-cols-3 gap-8 mt-8">
          
          {/* LEFT - Description & Features */}
          <div className="lg:col-span-2 space-y-6">
            <div className="bg-white border-2 border-sand-dark/30 p-8 rounded-2xl shadow-lg">
              <h2 className="text-3xl font-display font-bold text-gray-900 mb-4">
                Over dit project
              </h2>
              <p className="text-gray-700 text-lg leading-relaxed">{property.description}</p>

              {/* Features */}
              {property.features && property.features.length > 0 && (
                <div className="mt-6">
                  <h3 className="text-xl font-display font-bold text-gray-900 mb-3">Kenmerken</h3>
                  <div className="grid md:grid-cols-2 gap-3">
                    {property.features.map((feature, i) => (
                      <div key={i} className="flex items-center gap-2 text-gray-700">
                        <span className="text-terracotta">‚úì</span>
                        <span>{feature}</span>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>

          {/* RIGHT - Pricing & CTA */}
          <div className="space-y-6">
            <div className="bg-white border-2 border-terracotta/30 rounded-2xl p-6 shadow-xl sticky top-24">

              {/* Location */}
              <div className="flex items-center gap-2 text-gray-600 mb-4">
                <span className="text-xl">üìç</span>
                <span className="text-lg font-medium">{property.location}</span>
              </div>

              {/* Price */}
              <p className="text-4xl font-display font-bold text-terracotta mb-6">
                {formatPrice(property.price)}
              </p>

              {/* Specs Grid */}
              <div className="grid grid-cols-2 gap-3 mb-6">
                <div className="bg-sand-light p-4 rounded-xl text-center border border-sand-dark/30">
                  <p className="text-xs text-gray-500 font-medium mb-1">Oppervlakte</p>
                  <p className="text-mediterranean text-xl font-bold">{property.m2} m¬≤</p>
                </div>

                <div className="bg-sand-light p-4 rounded-xl text-center border border-sand-dark/30">
                  <p className="text-xs text-gray-500 font-medium mb-1">Slaapkamers</p>
                  <p className="text-mediterranean text-xl font-bold">{property.bedrooms}</p>
                </div>

                <div className="bg-sand-light p-4 rounded-xl text-center border border-sand-dark/30">
                  <p className="text-xs text-gray-500 font-medium mb-1">Oplevering</p>
                  <p className="text-gray-800 text-sm font-bold">{property.deliveryDate}</p>
                </div>

                <div className="bg-sand-light p-4 rounded-xl text-center border border-sand-dark/30">
                  <p className="text-xs text-gray-500 font-medium mb-1">ROI</p>
                  <p className="text-olive text-xl font-bold">{property.roi}%</p>
                </div>
              </div>

              {/* Sales Info */}
              <div className="border-t-2 border-sand-dark pt-6">
                <p className="text-gray-600 text-sm mb-2 flex justify-between">
                  <span>Verkocht:</span>
                  <span className="font-semibold">{property.soldUnits}/{property.totalUnits} units</span>
                </p>

                <div className="w-full bg-sand rounded-full h-3 mb-3 overflow-hidden">
                  <div
                    className="h-3 rounded-full bg-gradient-to-r from-terracotta to-terracotta-light transition-all duration-500"
                    style={{ width: `${percentageSold}%` }}
                  ></div>
                </div>

                <p className="text-gray-600 text-sm mb-4">
                  Verkooptempo: <span className="font-semibold text-gray-800">{soldPerMonth.toFixed(1)}/maand</span> ({monthsElapsed} maanden)
                </p>

                {/* Urgency Badge */}
                <div className={`
                  px-4 py-3 rounded-xl font-bold text-center text-white shadow-lg
                  bg-gradient-to-r ${urgencyStyles[urgency.text] || "from-olive to-olive-light"}
                `}>
                  {urgency.text} ‚Äî {available} beschikbaar
                </div>
              </div>

              {/* CTA BUTTONS - HIGH VISIBILITY */}
              <div className="mt-6 space-y-3">
                <button
                  onClick={onReserve}
                  className="w-full py-4 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all text-base"
                  style={{
                    backgroundColor: "var(--accent-action)",
                    fontSize: "1.05rem"
                  }}
                  onMouseEnter={(e) => {
                    e.target.style.backgroundColor = "var(--accent-gold)";
                    e.target.style.transform = "translateY(-2px)";
                  }}
                  onMouseLeave={(e) => {
                    e.target.style.backgroundColor = "var(--accent-action)";
                    e.target.style.transform = "translateY(0)";
                  }}
                >
                  ‚úÖ Reserveren
                </button>

                <button
                  onClick={onAIMatch}
                  className="w-full py-3.5 text-white font-bold rounded-xl shadow-md hover:shadow-lg transition-all"
                  style={{
                    backgroundColor: "#3498DB"
                  }}
                  onMouseEnter={(e) => {
                    e.target.style.backgroundColor = "#2980B9";
                    e.target.style.transform = "translateY(-2px)";
                  }}
                  onMouseLeave={(e) => {
                    e.target.style.backgroundColor = "#3498DB";
                    e.target.style.transform = "translateY(0)";
                  }}
                >
                  ü§ñ AI Matching
                </button>
              </div>

            </div>
          </div>

        </div>

      </div>
    </div>
  );
}



// =========================================================
// RESERVATION PAGE
// =========================================================
function ReservationPage({ property, onBack, onSuccess }) {
  const [form, setForm] = React.useState({
    name: "",
    email: "",
    phone: "",
    message: ""
  });

  const [error, setError] = React.useState("");
  const [loading, setLoading] = React.useState(false);

  async function handleSubmit() {
    if (isEmpty(form.name) || isEmpty(form.email) || isEmpty(form.phone)) {
      setError("Vul alle verplichte velden in.");
      return;
    }

    setLoading(true);
    const reservation = {
      id: Date.now(),
      projectId: property.id,
      name: form.name.trim(),
      email: form.email.trim(),
      phone: form.phone.trim(),
      message: form.message.trim(),
      createdAt: new Date().toISOString()
    };

    await saveToNetlify(reservation, "reservations.json");
    setLoading(false);
    onSuccess();
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-sand-light to-white py-12 px-6">
      <div className="max-w-2xl mx-auto">

        <button
          onClick={onBack}
          className="flex items-center gap-2 text-terracotta hover:text-terracotta-dark transition mb-6 font-medium"
        >
          ‚Üê Terug
        </button>

        <div className="text-center mb-8">
          <div className="w-16 h-16 bg-gradient-to-br from-olive to-olive-light rounded-full mx-auto mb-4 flex items-center justify-center text-3xl">
            ‚úÖ
          </div>
          <h1 className="text-4xl font-display font-bold text-gray-900 mb-2">
            Reserveer Uw Project
          </h1>
          <p className="text-gray-600">Vul onderstaand formulier in en wij nemen snel contact op</p>
        </div>

        {/* Property Summary */}
        <div className="bg-white border-2 border-terracotta/30 p-6 rounded-2xl mb-6 shadow-lg">
          <h3 className="text-xl font-display font-bold text-gray-900 mb-2">{property.title}</h3>
          <div className="flex items-center gap-2 text-gray-600 mb-2">
            <span>üìç</span>
            <span>{property.location}</span>
          </div>
          <p className="text-2xl font-display font-bold text-terracotta">{formatPrice(property.price)}</p>
        </div>

        {error && (
          <div className="bg-red-100 border-2 border-red-300 text-red-700 px-4 py-3 rounded-xl mb-6 flex items-center gap-2">
            <span>‚ö†Ô∏è</span>
            <span>{error}</span>
          </div>
        )}

        <div className="bg-white border-2 border-sand-dark/30 p-8 rounded-2xl shadow-lg space-y-5">
          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Uw naam *</label>
            <input
              className="w-full px-4 py-3 bg-sand-light border-2 border-sand-dark rounded-xl text-gray-800 focus:border-terracotta focus:outline-none focus:ring-2 focus:ring-terracotta/20"
              placeholder="Jan de Vries"
              value={form.name}
              onChange={(e) => setForm({ ...form, name: e.target.value })}
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">E-mailadres *</label>
            <input
              type="email"
              className="w-full px-4 py-3 bg-sand-light border-2 border-sand-dark rounded-xl text-gray-800 focus:border-terracotta focus:outline-none focus:ring-2 focus:ring-terracotta/20"
              placeholder="jan@example.com"
              value={form.email}
              onChange={(e) => setForm({ ...form, email: e.target.value })}
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Telefoonnummer *</label>
            <input
              type="tel"
              className="w-full px-4 py-3 bg-sand-light border-2 border-sand-dark rounded-xl text-gray-800 focus:border-terracotta focus:outline-none focus:ring-2 focus:ring-terracotta/20"
              placeholder="+31 6 12345678"
              value={form.phone}
              onChange={(e) => setForm({ ...form, phone: e.target.value })}
            />
          </div>

          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Bericht (optioneel)</label>
            <textarea
              rows="4"
              className="w-full px-4 py-3 bg-sand-light border-2 border-sand-dark rounded-xl text-gray-800 focus:border-terracotta focus:outline-none focus:ring-2 focus:ring-terracotta/20"
              placeholder="Vertel ons over uw interesse en eventuele vragen..."
              value={form.message}
              onChange={(e) => setForm({ ...form, message: e.target.value })}
            />
          </div>

          <div className="flex gap-4 pt-4">
            <button
              onClick={onBack}
              className="flex-1 px-6 py-4 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition"
            >
              Annuleren
            </button>

            <button
              onClick={handleSubmit}
              disabled={loading}
              className="flex-1 px-6 py-4 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition disabled:opacity-50 disabled:cursor-not-allowed"
              style={{
                backgroundColor: loading ? "var(--accent-action)" : "var(--accent-action)",
                fontSize: "1rem"
              }}
              onMouseEnter={(e) => {
                if (!loading) {
                  e.target.style.backgroundColor = "var(--accent-gold)";
                  e.target.style.transform = "translateY(-2px)";
                }
              }}
              onMouseLeave={(e) => {
                if (!loading) {
                  e.target.style.backgroundColor = "var(--accent-action)";
                  e.target.style.transform = "translateY(0)";
                }
              }}
            >
              {loading ? (
                <span className="flex items-center justify-center gap-2">
                  <div className="spinner !w-5 !h-5 !border-2 !border-white !border-t-transparent"></div>
                  Versturen...
                </span>
              ) : (
                "üì§ Verstuur Reservering"
              )}
            </button>
          </div>
        </div>

      </div>
    </div>
  );
}



// =========================================================
// RESERVATION SUCCESS PAGE
// =========================================================
function ReservationSuccess({ onClose }) {
  return (
    <div className="min-h-screen bg-gradient-to-b from-sand-light to-white flex items-center justify-center px-6">
      <div className="max-w-xl mx-auto text-center">
        
        <div className="w-24 h-24 bg-gradient-to-br from-olive to-olive-light rounded-full mx-auto mb-6 flex items-center justify-center text-5xl animate-fadeInUp">
          üéâ
        </div>

        <h1 className="text-4xl font-display font-bold text-gray-900 mb-4">
          Reservering Verzonden!
        </h1>
        
        <p className="text-xl text-gray-600 mb-8 leading-relaxed">
          Bedankt voor uw interesse! Een van onze experts neemt binnen 24 uur contact met u op om uw reservering te bevestigen en al uw vragen te beantwoorden.
        </p>

        <div className="bg-sand-light border-2 border-sand-dark/50 rounded-2xl p-6 mb-8">
          <p className="text-gray-700 mb-2">
            <span className="font-semibold">Volgende stappen:</span>
          </p>
          <ul className="text-left text-gray-600 space-y-2">
            <li className="flex items-start gap-2">
              <span className="text-terracotta mt-1">‚úì</span>
              <span>U ontvangt een bevestigingsmail</span>
            </li>
            <li className="flex items-start gap-2">
              <span className="text-terracotta mt-1">‚úì</span>
              <span>Een expert neemt contact met u op</span>
            </li>
            <li className="flex items-start gap-2">
              <span className="text-terracotta mt-1">‚úì</span>
              <span>Wij bespreken alle details en mogelijkheden</span>
            </li>
          </ul>
        </div>

        <button
          onClick={onClose}
          className="px-10 py-4 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition"
          style={{
            backgroundColor: "var(--accent-action)",
            fontSize: "1.05rem"
          }}
          onMouseEnter={(e) => {
            e.target.style.backgroundColor = "var(--accent-gold)";
            e.target.style.transform = "scale(1.05)";
          }}
          onMouseLeave={(e) => {
            e.target.style.backgroundColor = "var(--accent-action)";
            e.target.style.transform = "scale(1)";
          }}
        >
          üè† Terug naar Projecten
        </button>
      </div>
    </div>
  );
}
/*************************************************************
 *  BLOCK 5 ‚Äî ADMIN PROJECT EDITOR (CREATE + EDIT)
 *************************************************************/

function AdminEditPage({ project, onSave, onCancel }) {
  const isNew = project === "new";

  const [form, setForm] = React.useState(
    isNew
      ? {
          id: Date.now(),
          title: "",
          location: "",
          price: "",
          m2: "",
          bedrooms: "",
          deliveryDate: "",
          roi: "",
          totalUnits: "",
          soldUnits: "",
          salesStartDate: new Date().toISOString().split("T")[0],
          description: "",
          features: [],
          images: [],
          floorplans: []
        }
      : { ...project }
  );

  const [error, setError] = React.useState("");

  // ----------------------------------------------------------
  // FIELD HELPERS
  // ----------------------------------------------------------
  function updateField(field, value) {
    setForm((prev) => ({ ...prev, [field]: value }));
  }

  function updateList(field, index, value) {
    const list = [...form[field]];
    list[index] = value;
    setForm((prev) => ({ ...prev, [field]: list }));
  }

  function addToList(field) {
    setForm((prev) => ({ ...prev, [field]: [...prev[field], ""] }));
  }

  function removeFromList(field, index) {
    const list = [...form[field]];
    list.splice(index, 1);
    setForm((prev) => ({ ...prev, [field]: list }));
  }

  // ----------------------------------------------------------
  // VALIDATE + SAVE
  // ----------------------------------------------------------
  async function handleSave() {
    if (!form.title || !form.location) {
      setError("Titel en locatie zijn verplicht.");
      return;
    }
    if (!form.images || form.images.length === 0) {
      setError("Minstens √©√©n afbeelding is verplicht.");
      return;
    }

    // Sterk opgeschoonde projectdata voor JSON
    const projectData = {
      id: form.id,
      title: form.title.trim(),
      location: form.location.trim(),
      price: Number(form.price) || 0,
      m2: Number(form.m2) || 0,
      bedrooms: Number(form.bedrooms) || 0,
      deliveryDate: form.deliveryDate.trim(),
      roi: Number(form.roi) || 0,
      totalUnits: Number(form.totalUnits) || 0,
      soldUnits: Number(form.soldUnits) || 0,
      salesStartDate: form.salesStartDate,
      description: form.description.trim(),
      features: form.features.filter((x) => x.trim().length > 0),
      images: form.images.filter((x) => x.trim().length > 0),
      floorplans: form.floorplans.filter((x) => x.trim().length > 0)
    };

    await onSave(projectData);
  }

  // ----------------------------------------------------------
  // UI ‚Äî FULL FORM
  // ----------------------------------------------------------
  return (
    <div className="max-w-4xl mx-auto p-8">

      <h1 className="text-3xl font-bold mb-8 bg-gradient-to-r from-amber-300 to-yellow-500 text-transparent bg-clip-text">
        {isNew ? "Nieuw project toevoegen" : "Project bewerken"}
      </h1>

      {error && (
        <div className="mb-6 p-4 bg-red-600/30 border border-red-500 text-white rounded-xl">
          {error}
        </div>
      )}

      <div className="space-y-8 bg-slate-900/60 border border-slate-800 p-8 rounded-2xl">

        {/* ===========================
            BASIS FIELDS
        ============================ */}
        {[
          ["title", "Projectnaam"],
          ["location", "Locatie"],
          ["price", "Prijs (‚Ç¨)", "number"],
          ["m2", "Oppervlakte (m¬≤)", "number"],
          ["bedrooms", "Slaapkamers", "number"],
          ["deliveryDate", "Opleverdatum (bijv. Q2 2026)"],
          ["roi", "ROI (%)", "number"],
          ["totalUnits", "Totaal units", "number"],
          ["soldUnits", "Verkochte units", "number"],
          ["salesStartDate", "Start verkoopdatum", "date"]
        ].map(([field, label, type = "text"]) => (
          <div key={field}>
            <label className="block text-sm text-amber-200/80 mb-1 font-semibold">
              {label}
            </label>

            <input
              type={type}
              value={form[field]}
              onChange={(e) =>
                updateField(
                  field,
                  type === "number" ? Number(e.target.value) : e.target.value
                )
              }
              className="w-full px-4 py-3 bg-slate-800/50 border border-amber-500/20 rounded-xl text-white focus:ring-2 focus:ring-amber-500/40"
            />
          </div>
        ))}

        {/* ===========================
            DESCRIPTION
        ============================ */}
        <div>
          <label className="block text-sm text-amber-200/80 mb-1 font-semibold">
            Beschrijving
          </label>

          <textarea
            rows="5"
            value={form.description}
            onChange={(e) => updateField("description", e.target.value)}
            className="w-full px-4 py-3 bg-slate-800/50 border border-amber-500/20 rounded-xl text-white"
          />
        </div>

        {/* ===========================
            FEATURES
        ============================ */}
        <div>
          <label className="block text-sm text-amber-200/80 mb-1 font-semibold">
            Features (bijv. ‚ÄúZeezicht‚Äù, ‚ÄúZwembad‚Äù)
          </label>

          {form.features.map((item, idx) => (
            <div key={idx} className="flex gap-3 mb-2">
              <input
                value={item}
                onChange={(e) => updateList("features", idx, e.target.value)}
                className="flex-1 px-4 py-3 bg-slate-800 border border-amber-500/20 text-white rounded-xl"
              />
              <button
                onClick={() => removeFromList("features", idx)}
                className="px-3 bg-red-600 text-white rounded-xl"
              >
                ‚úï
              </button>
            </div>
          ))}

          <button
            onClick={() => addToList("features")}
            className="px-4 py-2 bg-amber-500 text-slate-900 rounded-xl font-bold mt-2"
          >
            + Feature
          </button>
        </div>

        {/* ===========================
            IMAGES
        ============================ */}
        <div>
          <label className="block text-sm text-amber-200/80 mb-1 font-semibold">
            Afbeeldingen (URLs)
          </label>

          {form.images.map((item, idx) => (
            <div key={idx} className="flex gap-3 mb-2">
              <input
                value={item}
                onChange={(e) => updateList("images", idx, e.target.value)}
                className="flex-1 px-4 py-3 bg-slate-800 border border-amber-500/20 text-white rounded-xl"
              />
              <button
                onClick={() => removeFromList("images", idx)}
                className="px-3 bg-red-600 text-white rounded-xl"
              >
                ‚úï
              </button>
            </div>
          ))}

          <button
            onClick={() => addToList("images")}
            className="px-4 py-2 bg-amber-500 text-slate-900 rounded-xl font-bold mt-2"
          >
            + Afbeelding
          </button>
        </div>

        {/* ===========================
            FLOORPLANS
        ============================ */}
        <div>
          <label className="block text-sm text-amber-200/80 mb-1 font-semibold">
            Plattegronden (URLs)
          </label>

          {form.floorplans.map((item, idx) => (
            <div key={idx} className="flex gap-3 mb-2">
              <input
                value={item}
                onChange={(e) => updateList("floorplans", idx, e.target.value)}
                className="flex-1 px-4 py-3 bg-slate-800 border border-amber-500/20 text-white rounded-xl"
              />
              <button
                onClick={() => removeFromList("floorplans", idx)}
                className="px-3 bg-red-600 text-white rounded-xl"
              >
                ‚úï
              </button>
            </div>
          ))}

          <button
            onClick={() => addToList("floorplans")}
            className="px-4 py-2 bg-amber-500 text-slate-900 rounded-xl font-bold mt-2"
          >
            + Plattegrond
          </button>
        </div>

      </div>

      {/* SAVE / CANCEL BUTTONS */}
      <div className="flex gap-4 mt-10">
        <button
          onClick={onCancel}
          className="flex-1 px-6 py-4 bg-slate-800 border border-slate-700 text-white rounded-xl hover:bg-slate-700"
        >
          Annuleer
        </button>

        <button
          onClick={handleSave}
          className="flex-1 px-6 py-4 bg-amber-500 text-slate-900 rounded-xl font-bold shadow-lg hover:bg-amber-400"
        >
          Opslaan
        </button>
      </div>

    </div>
  );
}
/*************************************************************
 * BLOCK 6 ‚Äî INVESTOR DASHBOARD
 * Persoonlijke omgeving voor ingelogde investeerders
 *************************************************************/

/* ==========================================================
   FAVORIETEN OPSLAAN / LADEN
========================================================== */
async function saveFavorite(userEmail, projectId) {
  const res = await fetch("/.netlify/functions/favorites-save", {
    method: "POST",
    body: JSON.stringify({ email: userEmail, projectId })
  });
  return res.json();
}

async function loadFavorites(userEmail) {
  const res = await fetch("/.netlify/functions/favorites-load", {
    method: "POST",
    body: JSON.stringify({ email: userEmail })
  });
  return res.json();
}

/* ==========================================================
   INVESTOR PROFIEL OPSLAAN / LADEN
========================================================== */
async function saveInvestorProfile(email, profile) {
  const res = await fetch("/.netlify/functions/investor-profile-save", {
    method: "POST",
    body: JSON.stringify({ email, profile })
  });
  return res.json();
}

async function loadInvestorProfile(email) {
  const res = await fetch("/.netlify/functions/investor-profile-load", {
    method: "POST",
    body: JSON.stringify({ email })
  });
  return res.json();
}

/*************************************************************
 * DASHBOARD COMPONENTEN
 *************************************************************/

/* ==========================================================
   FAVORIETEN LIJST
========================================================== */
function FavoritesList({ favorites, projects, onOpenProject }) {
  const favProjects = projects.filter((p) => favorites.includes(p.id));

  if (favProjects.length === 0) {
    return (
      <p className="text-slate-400">
        Je hebt nog geen favoriete projecten toegevoegd.
      </p>
    );
  }

  return (
    <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {favProjects.map((p) => (
        <div key={p.id} className="bg-slate-900 border border-slate-700 rounded-xl overflow-hidden shadow-lg">

          <img
            src={p.images?.[0]}
            className="w-full h-40 object-cover"
          />

          <div className="p-4">
            <h3 className="text-lg font-bold text-white">{p.title}</h3>
            <p className="text-slate-400">{p.location}</p>

            <p className="mt-2 text-xl font-bold text-amber-400">
              {formatPrice(p.price)}
            </p>

            <button
              onClick={() => onOpenProject(p)}
              className="mt-4 w-full py-2 bg-amber-500 text-slate-900 rounded-xl font-bold hover:bg-amber-400"
            >
              Bekijk project
            </button>
          </div>

        </div>
      ))}
    </div>
  );
}

/* ==========================================================
   INVESTOR PROFIEL BEWERKEN
========================================================== */
function InvestorProfileCard({ profile, onSave }) {
  const [form, setForm] = React.useState(profile || {
    name: "",
    phone: "",
    investmentRange: "",
    regions: "",
    yieldPreference: "",
    notes: ""
  });

  function update(field, value) {
    setForm((prev) => ({ ...prev, [field]: value }));
  }

  async function handleSave() {
    await onSave(form);
  }

  return (
    <div className="bg-slate-900/70 border border-slate-800 p-6 rounded-2xl">

      <h2 className="text-2xl font-bold mb-4 text-amber-300">Mijn Profiel</h2>

      {[
        ["name", "Naam"],
        ["phone", "Telefoon"],
        ["investmentRange", "Investeringsrange (bijv. ‚Ç¨500k‚Äì‚Ç¨3M)"],
        ["regions", "Voorkeursregio‚Äôs (Costa Blanca, Murcia, etc.)"],
        ["yieldPreference", "Gewenst rendement (%)"]
      ].map(([field, label]) => (
        <div key={field} className="mb-4">
          <label className="text-sm text-amber-200/60">{label}</label>
          <input
            value={form[field]}
            onChange={(e) => update(field, e.target.value)}
            className="w-full mt-1 px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-xl text-white"
          />
        </div>
      ))}

      <div className="mb-6">
        <label className="text-sm text-amber-200/60">Notities</label>
        <textarea
          rows={4}
          value={form.notes}
          onChange={(e) => update("notes", e.target.value)}
          className="w-full mt-1 px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-xl text-white"
        />
      </div>

      <button
        onClick={handleSave}
        className="w-full py-3 bg-gradient-to-r from-amber-500 to-yellow-600 text-slate-900 font-bold rounded-xl hover:from-amber-400 hover:to-yellow-500"
      >
        Profiel opslaan
      </button>

    </div>
  );
}

/* ==========================================================
   AI AANBEVELINGEN OP BASIS VAN INVESTOR PROFIEL
========================================================== */
function InvestorRecommendations({ recommendations, onOpenProject }) {
  if (!recommendations || recommendations.length === 0) {
    return <p className="text-slate-400">Nog geen aanbevelingen beschikbaar.</p>;
  }

  return (
    <div className="space-y-4">
      {recommendations.map((r, i) => (
        <div key={i} className="bg-slate-900 border border-amber-500/20 p-5 rounded-xl">
          <h3 className="text-xl font-bold text-white">{r.project.title}</h3>
          <p className="text-amber-300">Matchscore: {r.score}</p>
          <p className="text-slate-300 text-sm mt-1">{r.reason}</p>

          <button
            onClick={() => onOpenProject(r.project)}
            className="mt-4 px-4 py-2 bg-amber-500 text-slate-900 rounded-xl font-bold"
          >
            Bekijk project
          </button>
        </div>
      ))}
    </div>
  );
}

/*************************************************************
 * ===========================================================
 *  INVESTOR DASHBOARD ‚Äî MAIN COMPONENT
 * ===========================================================
 *************************************************************/
function InvestorDashboard({ user, projects, onOpenProject }) {
  const [favorites, setFavorites] = React.useState([]);
  const [profile, setProfile] = React.useState(null);
  const [recommendations, setRecommendations] = React.useState([]);

  // Load investor data
  React.useEffect(() => {
    async function loadAll() {
      const fav = await loadFavorites(user.email);
      const prof = await loadInvestorProfile(user.email);

      setFavorites(fav.favorites || []);
      setProfile(prof.profile || {});

      // AI aanbevelingen genereren
      const ai = await runAIMatch(
        { investorProfile: prof.profile },
        projects
      );
      setRecommendations(ai || []);
    }
    loadAll();
  }, [user.email]);

  async function toggleFavorite(projectId) {
    const result = await saveFavorite(user.email, projectId);
    setFavorites(result.favorites);
  }

  async function saveProfileData(newProfile) {
    await saveInvestorProfile(user.email, newProfile);
    setProfile(newProfile);
  }

  return (
    <div className="max-w-7xl mx-auto p-8 space-y-12">

      <h1 className="text-4xl font-bold text-amber-400">Mijn Dashboard</h1>

      {/* FAVORITES */}
      <section>
        <h2 className="text-2xl font-bold mb-4 text-white">Mijn Favorieten</h2>
        <FavoritesList
          favorites={favorites}
          projects={projects}
          onOpenProject={onOpenProject}
        />
      </section>

      {/* PROFILE */}
      <section>
        <InvestorProfileCard profile={profile} onSave={saveProfileData} />
      </section>

      {/* AI RECOMMENDATIONS */}
      <section>
        <h2 className="text-2xl font-bold mb-4 text-white">
          AI Aanbevelingen
        </h2>
        <InvestorRecommendations
          recommendations={recommendations}
          onOpenProject={onOpenProject}
        />
      </section>

    </div>
  );
}
/*************************************************************
 * BLOCK 7 ‚Äî MAIN APP ROUTER + LOGIN + STATE MANAGER
 *************************************************************/

function App() {
  const [projects, setProjects] = React.useState([]);
  const [investors, setInvestors] = React.useState([]);
  const [reservations, setReservations] = React.useState([]);

  const [page, setPage] = React.useState("overview");
  const [selectedProject, setSelectedProject] = React.useState(null);

  // ----------------------------------------
  // AUTH STATE (CLIENT SIDE)
  // ----------------------------------------
  const [user, setUser] = React.useState(null);
  const [token, setToken] = React.useState(null);
  const [isAdmin, setIsAdmin] = React.useState(false);
  const [loginModalOpen, setLoginModalOpen] = React.useState(false);

  // ----------------------------------------
  // ------------------ LOAD ALL DATA -------------------------
  // ----------------------------------------
  async function loadData() {
    const p = await fetch("/data/projects.json").then((r) => r.json());
    const i = await fetch("/data/investors.json").then((r) => r.json());
    const r = await fetch("/data/reservations.json").then((r) => r.json());

    setProjects(p);
    setInvestors(i);
    setReservations(r);
  }

  React.useEffect(() => {
    loadData();
  }, []);

  // ----------------------------------------
  // ---------------- AUTO LOGIN SESSION ----------------------
  // ----------------------------------------
  React.useEffect(() => {
    const savedToken = localStorage.getItem("jwt");
    const savedUser = localStorage.getItem("user");

    if (savedToken && savedUser) {
      setToken(savedToken);
      const parsedUser = JSON.parse(savedUser);
      setUser(parsedUser);

      if (parsedUser.role === "admin") setIsAdmin(true);
    }
  }, []);

  // ----------------------------------------
  // ---------------- LOGIN HANDLER ----------------------------
  // ----------------------------------------
  async function handleLogin(email) {
  const result = await loginUser(email);

  if (!result || result.error) {
    alert(result?.error || "Login mislukt. Server returned invalid response.");
    return;
  }

  if (!result.user) {
    alert("Login mislukt. Geen gebruikersdata ontvangen.");
    return;
  }

  alert("Ingelogd!");
  setLoginModalOpen(false);

  setToken(result.token || null);
  setUser(result.user);

  if (result.user && result.user.role === "admin") {
    setIsAdmin(true);
  }

  localStorage.setItem("jwt", result.token || "");
  localStorage.setItem("user", JSON.stringify(result.user));
}


  // ----------------------------------------
  // ---------------- LOGOUT HANDLER ---------------------------
  // ----------------------------------------
  function handleLogout() {
    setToken(null);
    setUser(null);
    setIsAdmin(false);
    localStorage.removeItem("jwt");
    localStorage.removeItem("user");

    setPage("overview");
  }

  // ----------------------------------------
  // ---------------- SAVE PROJECT -----------------------------
  // ----------------------------------------
  async function saveProject(updated) {
    await saveToNetlify(updated, "projects.json");
    await loadData();
    setPage("overview");
  }

  // ----------------------------------------
  // ---------------- AI MATCHING --------------------------------
  // ----------------------------------------
  const [aiResults, setAIResults] = React.useState(null);

  async function handleAIMatching(project) {
    const results = await runAIMatch(project, investors);
    setAIResults(results);
    setSelectedProject(project);
    setPage("ai-match");
  }

  // ----------------------------------------
  // ---------------- ROUTER SWITCH ------------------------------
  // ----------------------------------------
  function renderPage() {
    switch (page) {
      case "overview":
        return (
          <OverviewPage
            projects={projects}
            onSelect={(p) => {
              setSelectedProject(p);
              setPage("detail");
            }}
            isAdmin={isAdmin}
            onEdit={(p) => {
              setSelectedProject(p === "new" ? null : p);
              setPage("admin-edit");
            }}
            onRegister={() => setLoginModalOpen(true)}
          />
        );

      case "detail":
        return (
          <DetailPage
            property={selectedProject}
            onBack={() => setPage("overview")}
            onReserve={() => setPage("reserve")}
            onAIMatch={() => handleAIMatching(selectedProject)}
          />
        );

      case "reserve":
        return (
          <ReservationPage
            property={selectedProject}
            onBack={() => setPage("detail")}
            onSuccess={() => setPage("reserve-success")}
          />
        );

      case "reserve-success":
        return (
          <ReservationSuccess
            onClose={() => setPage("overview")}
          />
        );

      case "admin-edit":
        if (!isAdmin)
          return <p className="text-red-400 p-10">Geen toegang.</p>;

        return (
          <AdminEditPage
            project={selectedProject || "new"}
            onCancel={() => setPage("overview")}
            onSave={saveProject}
          />
        );

      case "ai-match":
        return (
          <div className="max-w-5xl mx-auto p-8">
            <button
              onClick={() => setPage("detail")}
              className="text-amber-300 mb-4"
            >
              ‚Üê Terug
            </button>

            <h1 className="text-3xl font-bold text-amber-400 mb-6">
              AI Matching Resultaten
            </h1>

            {!aiResults || aiResults.length === 0 ? (
              <p className="text-slate-300">Geen aanbevelingen beschikbaar.</p>
            ) : (
              aiResults.map((r, i) => (
                <div
                  key={i}
                  className="bg-slate-900/60 border border-amber-500/20 p-6 rounded-xl mb-4"
                >
                  <h2 className="text-xl font-bold">{r.name}</h2>
                  <p className="text-amber-300 font-bold">
                    Matchscore: {r.matchScore}
                  </p>
                  <p className="text-slate-300">{r.reason}</p>
                </div>
              ))
            )}
          </div>
        );

      case "dashboard":
        if (!user)
          return <p className="text-white p-8">Log eerst in.</p>;

        return (
          <InvestorDashboard
            user={user}
            projects={projects}
            onOpenProject={(p) => {
              setSelectedProject(p);
              setPage("detail");
            }}
          />
        );

      default:
        return <p className="text-white p-8">Onbekende pagina.</p>;
    }
  }

  // ----------------------------------------
  // ---------------- NAVBAR ------------------------------
  // ----------------------------------------
  function Navbar() {
    return (
      <nav className="w-full backdrop-blur-sm shadow-sm sticky top-0 z-40"
        style={{backgroundColor: "var(--bg-dark-green)"}}
      >
        <div className="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">

          {/* Logo / Brand */}
          <div 
            className="flex items-center gap-3 cursor-pointer group"
            onClick={() => setPage("overview")}
          >
            <div className="flex items-center gap-2">
              <div className="w-8 h-8 rounded-lg flex items-center justify-center font-bold text-lg"
                style={{
                  backgroundColor: "var(--accent-copper)",
                  color: "white"
                }}
              >
                C
              </div>
              <h1 className="text-xl font-display font-bold text-white">
                Costa Capital
              </h1>
            </div>
          </div>

          {/* Navigation Links & Actions */}
          <div className="flex items-center gap-4">

            {user && (
              <>
                <button
                  onClick={() => setPage("overview")}
                  className="hidden md:block px-4 py-2 text-white/90 hover:text-white font-medium transition"
                >
                  Projecten
                </button>

                <button
                  onClick={() => setPage("dashboard")}
                  className="px-4 py-2 rounded-lg font-medium transition"
                  style={{
                    backgroundColor: "rgba(255, 255, 255, 0.1)",
                    color: "white"
                  }}
                  onMouseEnter={(e) => e.target.style.backgroundColor = "rgba(255, 255, 255, 0.2)"}
                  onMouseLeave={(e) => e.target.style.backgroundColor = "rgba(255, 255, 255, 0.1)"}
                >
                  Dashboard
                </button>

                {isAdmin && (
                  <button
                    onClick={() => setPage("admin-edit")}
                    className="px-4 py-2 text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition"
                    style={{backgroundColor: "var(--accent-copper)"}}
                    onMouseEnter={(e) => e.target.style.backgroundColor = "var(--accent-copper-light)"}
                    onMouseLeave={(e) => e.target.style.backgroundColor = "var(--accent-copper)"}
                  >
                    Admin
                  </button>
                )}

                <div className="h-6 w-px bg-white/20"></div>

                <button
                  onClick={handleLogout}
                  className="px-4 py-2 text-white/80 hover:text-white font-medium transition"
                  title="Uitloggen"
                >
                  Uitloggen
                </button>
              </>
            )}

            {!user && (
              <>
                <button
                  onClick={() => setPage("overview")}
                  className="hidden md:block px-4 py-2 text-white/90 hover:text-white font-medium transition"
                >
                  Projecten
                </button>

                <button
                  onClick={() => setLoginModalOpen(true)}
                  className="px-6 py-2 text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition"
                  style={{backgroundColor: "var(--accent-copper)"}}
                  onMouseEnter={(e) => e.target.style.backgroundColor = "var(--accent-copper-light)"}
                  onMouseLeave={(e) => e.target.style.backgroundColor = "var(--accent-copper)"}
                >
                  Inloggen
                </button>
              </>
            )}

          </div>

        </div>
      </nav>
    );
  }

  // ----------------------------------------
  // FINAL RENDER
  // ----------------------------------------
  return (
    <div>
      <Navbar />

      {/* LOGIN MODAL */}
      <LoginModal
        open={loginModalOpen}
        onClose={() => setLoginModalOpen(false)}
        onLogin={handleLogin}
      />

      {/* PAGE CONTENT */}
      <div>{renderPage()}</div>
    </div>
  );
}
/*************************************************************
 * BLOCK 8 ‚Äî START VAN DE APP (ReactDOM render)
 *************************************************************/

const rootElement = document.getElementById("root");
const root = ReactDOM.createRoot(rootElement);

root.render(<App />);

  </script>
</body>
</html>
